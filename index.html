<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>React Fiber</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/simple.css" />

    <link rel="stylesheet" href="plugin/highlight/monokai.css" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-transition="zoom">
          <h2 class="r-fit-text">React Fiber</h2>
          <h4>ìš°ì•„í•œí…Œí¬ì½”ìŠ¤ 7ê¸° í”¼í„°</h4>
        </section>

        <section class="r-stack">
          <h3>
            ë¦¬ì•¡íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©° <br />
            ì´ëŸ° ê¶ê¸ˆì¦ ê°€ì ¸ë³´ì‹  ì  ìˆìœ¼ì‹ ê°€ìš”?
          </h3>
          <div>
            <p class="fragment fade-in">
              Q1) setStateë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ ìƒíƒœê°’ì´ <b>ì™œ</b> ë°”ë¡œ ë°”ë€Œì§€ ì•Šì§€?
            </p>
            <pre class="fragment fade-in">
              <code data-trim class="language-typescript" data-line-numbers="">
                const [count,setCount] = useState(0);
                
                const handleClick = () => {
                  setCount(count+1); 
                  console.log(count); // 0
                  setCount(count+1); 
                  console.log(count); //  ã„¹ã„¹
                }
              </code>
            </pre>
          </div>
          <div>
            <p class="fragment fade-in">
              Q2) í›…ì„ ifë¬¸ì´ë‚˜ í•¨ìˆ˜ ì•ˆì—ì„œ í˜¸ì¶œí•˜ë©´ <b>ì™œ</b> ì•ˆë˜ì§€?
            </p>
            <pre class="fragment fade-in"> 
                <code data-trim class="language-typescript" data-line-numbers="">
                  if(condition){
                    const [state,setState] = useState(0); 
                    // [Error]
                    // React has detected a change in the order of Hooks called.
                    // This will lead to bugs and errors if not fixed.
                  }
                </code>
              </pre>
          </div>
          <div>
            <p class="fragment fade-left">=> React Fiber</p>
          </div>
        </section>

        <section>
          <h2>ì´ë²ˆ ì‹œê°„ì˜ ëª©í‘œ</h2>
          <ol>
            <li class="fragment fade-in">
              ì•ì„  ê¶ê¸ˆì¦ì— ëŒ€í•œ ë‹µì„ ì°¾ì•„ë³´ì.
              <div class="fragment fade-in-then-semi-out">
                <p>
                  Q1) setStateë¥¼ ì‹¤í–‰í•˜ë©´ ìƒíƒœê°’ì´ <b>ì™œ</b> ë°”ë¡œ ë°”ë€Œì§€ ì•Šì§€?
                </p>
                <p>Q2) í›…ì„ ifë¬¸ì´ë‚˜ í•¨ìˆ˜ ì•ˆì—ì„œ í˜¸ì¶œí•˜ë©´ <b>ì™œ</b> ì•ˆë˜ì§€?</p>
              </div>
            </li>

            <li class="fragment fade-in">
              'ë¦¬ì•¡íŠ¸ íŒŒì´ë²„ë€ ____ì´ë‹¤.'ì— ëŒ€í•œ ë‹µì„ ì°¾ì•„ë³´ì.
            </li>
          </ol>
        </section>

        <section>
          <h2>ëª©ì°¨</h2>
          <ol>
            <li class="fragment fade-left">React Fiberì˜ ë“±ì¥ ë°°ê²½</li>
            <li class="fragment fade-left">React Fiberë€?</li>
            <li class="fragment fade-left">React Fiberì˜ ì£¼ìš” ì†ì„±</li>
          </ol>
        </section>

        <section>
          <section>
            <h2>1. React Fiberì˜ ë“±ì¥ ë°°ê²½</h2>
          </section>
          <section>
            <h2>ì¬ì¡°ì •ì</h2>
            <p>
              : ë¦¬ì•¡íŠ¸ì—ì„œ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ ì´ì „ ìƒíƒœì™€ ìƒˆë¡œìš´
              <span class="fragment highlight-red">ìƒíƒœë¥¼ ë¹„êµ</span>í•˜ì—¬ ì‹¤ì œ
              DOMì— ì–´ë–¤
              <span class="fragment highlight-red">ë³€ê²½ì‚¬í•­ì„ ì ìš©</span>í• ì§€
              ê²°ì •í•˜ê³  ê´€ë¦¬í•˜ëŠ” í•µì‹¬ ì—”ì§„
            </p>
          </section>

          <section>
            <h3>React16 ì´ì „ : ìŠ¤íƒ ì¬ì¡°ì •ì</h3>
            <div class="fragment fade-in-then-semi-out">
              <div>
                <ul>
                  <li>ë Œë”ë§ ì‘ì—…ì„ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬</li>
                </ul>
              </div>
            </div>
            <p class="fragment fade-in">ë‹¨ì </p>
            <ol>
              <li class="fragment fade-in">ì¤‘ê°„ì— ì‘ì—…ì„ ì¤‘ë‹¨í•  ìˆ˜ ì—†ë‹¤.</li>
              <li class="fragment fade-in">ìˆœì„œë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.</li>
            </ol>
            <p class="fragment fade-left">=> Fiber ì¬ì¡°ì •ì</p>
          </section>

          <section>
            <h3>React16.8 ì´ì „ : í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸</h3>
            <div class="fragment fade-in-then-semi-out">
              <div>
                <ul>
                  <li>í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ê°€ ì¡´ì¬í•˜ê¸°ëŠ” í–ˆì§€ë§Œ</li>
                  <p>ìƒíƒœë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ì—ˆë‹¤.</p>
                </ul>
              </div>
            </div>
            <p class="fragment fade-left">=> React Hooks</p>
            <p class="fragment fade-left">=> Fiber Nodeê°€ ê´€ë¦¬</p>
          </section>
        </section>

        <section>
          <section>
            <h2>2. React Fiberë€?</h2>
            <p class="fragment fade-in">ë‘ ê°€ì§€ ì—­í• </p>

            <div>
              <p class="fragment fade-in">1. Fiber Architecture</p>
              <p class="fragment fade-in">: Fiber ì¬ì¡°ì •ì</p>
            </div>

            <div>
              <p class="fragment fade-in">2. Fiber Node</p>
              <p class="fragment fade-in">
                : í›… ë“± ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“  ìƒíƒœë¥¼ ê´€ë¦¬
              </p>
            </div>
          </section>

          <section>
            <h3>2.1. Fiber Architecture(Fiber ì¬ì¡°ì •ì)</h3>
            <p class="fragment fade-in">: React16ì—ì„œ ë“±ì¥í•œ ì¬ì¡°ì • ì—”ì§„</p>
            <ul>
              <li class="fragment fade-in">ê° ë Œë”ë§ ì‘ì—…ì„ ì˜ê²Œ ë‚˜ëˆ„ì–´</li>
              <p class="fragment fade-in">
                ìš°ì„ ìˆœìœ„ê°€ ë” ë†’ì€ ì‘ì—…ì„ ë¨¼ì € ì²˜ë¦¬
              </p>
              <p class="fragment fade-in">=> ë¦¬ì•¡íŠ¸ ë™ì‹œì„±</p>
            </ul>
          </section>

          <section>
            <h3>2.2. Fiber Node</h3>
            <p class="fragment fade-in">
              : ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“  ìƒíƒœë¥¼ ì €ì¥í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´
            </p>
            <ul>
              <li class="fragment fade-in">
                í›…, props, ref ë“± ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ë“  ìƒíƒœë¥¼ ì €ì¥
              </li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h2>3. React Fiberì˜ <br />ì£¼ìš” ì†ì„±</h2>
          </section>
          <section>
            <a
              href="https://github.com/facebook/react/blob/main/packages/react-reconciler/src/ReactFiber.js"
              target="_blank"
              style="font-size: 20px"
              >react/packages/react-reconciler/ReactFiber.js</a
            >
            <pre style="height: 680px; font-size: 16px">
							<code data-trim data-noescape class="language-typescript" data-line-numbers="|1-7,33|1,9-15|1,9,17-22|1,24-32,33|1,19,33|1,19,20,33">
export type Fiber = {
  // Instance
  tag: WorkTag;
  key: null | string;
  elementType: any;
  type: any;
  stateNode: any;

  // Fiber
  return: Fiber | null;
  child: Fiber | null;
  sibling: Fiber | null;
  index: number;
  ref: RefObject;
  refCleanup: null | (() => void);

  pendingProps: any;
  memoizedProps: any;
  updateQueue: mixed;
  memoizedState: any;
  dependencies: Dependencies | null;
  mode: TypeOfMode;

  // Effects
  flags: Flags;
  subtreeFlags: Flags;
  deletions: Array | null;

  lanes: Lanes;
  childLanes: Lanes;

  alternate: Fiber | null;
};
</code>
							</pre>
          </section>

          <section>
            <h2>3.1. updateQueue</h2>

            <div class="fragment fade-in-then-semi-out">
              Q1) setStateë¥¼ í˜¸ì¶œí–ˆëŠ”ë° <b>ì™œ</b> ìƒíƒœì— ë°”ë¡œ ë°˜ì˜ì´<br />
              ë°”ë¡œ ì•ˆë˜ì§€?
              <pre>
                <code data-trim class="language-typescript">
                  const [count,setCount] = useCount(0);
                  
                  const handleClick = () => {
                    setCount(count+1); 
                    console.log(count); // 0
                    setCount(count+1); 
                    console.log(count); // 0
                  } 
                </code>
              </pre>
            </div>

            <p class="fragment fade-in">: ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ê´€ë¦¬í•˜ëŠ” í</p>
            <ul>
              <li class="fragment fade-in">
                setStateë¥¼ ì‹¤í–‰í•˜ë©´ updateQueueì— ì¶”ê°€í•˜ê³ , <br />ë Œë”ë§ ì£¼ê¸°ê°€
                ëë‚  ë•Œ ì—…ë°ì´íŠ¸ë¥¼ í•œ ë²ˆì— ì²˜ë¦¬
              </li>
              <a
                class="fragment fade-in"
                href="https://ko.react.dev/learn/queueing-a-series-of-state-updates"
                target="_blank"
                >=> ë¦¬ì•¡íŠ¸ì˜ Batch ì—…ë°ì´íŠ¸</a
              >
            </ul>
          </section>

          <section>
            <h2>3.2. memoizedState</h2>

            <div class="fragment fade-in-then-semi-out">
              Q2) í›…ì„ ifë¬¸ì´ë‚˜ í•¨ìˆ˜ ì•ˆì—ì„œ <b>ì™œ</b> í˜¸ì¶œí•˜ë©´ ì•ˆë˜ì§€?
              <pre>
                <code data-trim class="language-typescript" data-line-numbers="">
                  if(condition){
                    const [state,setState] = useState(0); 
                    // [Error]
                    // React has detected a change in the order of Hooks called.
                    // This will lead to bugs and errors if not fixed.
                  }
                </code>
              </pre>
            </div>
          </section>

          <section>
            <h2>3.2. memoizedState</h2>

            <pre class="fragment fade-in">
              <code class="language-javascript" data-trim data-line-numbers="|1,2,3,9|1,5-7,9|">
                function ExampleComponent() {
                  const [count, setCount] = useState(0);         // 1ë²ˆì§¸ Hook
                  const [text, setText] = useState('hi');        // 2ë²ˆì§¸ Hook

                  useEffect(() => {                              // 3ë²ˆì§¸ Hook
                    document.title = text + count;
                  }, [text, count]);
                  // ..
                }
              </code>
            </pre>
            <pre class="fragment fade-in">
              <code class="language-javascript" data-trim data-line-numbers="|1,3,5,7,8,9,10|1,2,10|1,3,4,9,10|1,5,6,8,10|1,7,10|">
                Fiber.memoizedState = {
                  memoizedState: 0, // useState(0)
                  next: {
                    memoizedState: 'hi', // useState('hi')
                    next: {
                      memoizedState: { deps: ['hi', 0], ... }, // useEffect
                      next: null
                    }
                  }
                }
              </code>
            </pre>
          </section>

          <section>
            <h2>2) memoizedState</h2>
            <ul>
              <li class="fragment fade-in">ë¦¬ì•¡íŠ¸ì˜ í›…ì„ ì €ì¥</li>
              <p class="fragment fade-in">
                => í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§í•´ë„ í›…ì˜ ì´ì „ ìƒíƒœë¥¼ ê¸°ì–µ
              </p>
              <li class="fragment fade-in">ì—°ê²° ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ ì €ì¥</li>
              <p class="fragment fade-in">
                => í›…ì„ ifë¬¸ì´ë‚˜ í•¨ìˆ˜ ì•ˆì—ì„œ í˜¸ì¶œí•˜ë©´ ì•ˆëœë‹¤.
              </p>
            </ul>
          </section>

          <section>
            <h2>3.3. ê·¸ ì™¸</h2>
            <ol>
              <li class="fragment fade-in">
                <b>lanes</b> : ì‘ì—… ìš°ì„ ìˆœìœ„ë¥¼ ê´€ë¦¬
                <a
                  href="https://ko.react.dev/blog/2022/03/29/react-v18#what-is-concurrent-react"
                  target="_blank"
                  >=> ë™ì‹œì„± ëª¨ë“œ</a
                >
                <ul class="fragment fade-in">
                  <li>Transition API</li>
                  <li>Suspense</li>
                </ul>
              </li>
              <li class="fragment fade-in">
                <b>alternate</b> : í˜„ì¬ íŠ¸ë¦¬ì™€ ì‘ì—… ì¤‘ì¸ íŠ¸ë¦¬<br />
                ì‚¬ì´ì˜ ì—°ê²°ì„ ê´€ë¦¬
                <ul class="fragment fade-in">
                  <li>ì¬ì¡°ì •</li>
                  <li>ê°€ìƒë”</li>
                </ul>
              </li>
              <li class="fragment fade-in">
                <b>memoizedProps / pendingProps</b>
                <p>: ì»´í¬ë„ŒíŠ¸ì˜ propsë¥¼ ê´€ë¦¬</p>
              </li>
            </ol>
          </section>
        </section>

        <section>
          <h4>
            Q) ê·¸ë˜ í”¼í„°, React Fiberê°€ ë¦¬ì•¡íŠ¸ì˜ ë‚´ë¶€ êµ¬ì¡°ì¸ ê±´ ì•Œê² ì–´.
            <br />ì´ê²Œ ë‚´ê°€ ê°œë°œí•˜ëŠ”ë° ë„ì›€ì´ ë ê¹Œ?
          </h4>
          <ol>
            <li class="fragment fade-in">
              í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì˜ ì „ì²´ì ì¸ ê·¸ë¦¼ì„ ê·¸ë¦¬ê¸° ìœ„í•´ì„œ
              <p class="fragment fade-in">
                "ê³ ìˆ˜ì¤€ì˜ í”„ë¡œê·¸ë˜ë°ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” ì €ìˆ˜ì¤€ì˜ ì˜ì—­ì„ ì°¨ì§€í•˜ê³ 
                ìˆëŠ” ê³„ì¸µì„ ì´í•´í•˜ê³  ê³ ìˆ˜ì¤€ì˜ ì‚¬ê³ ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡œê·¸ë˜ë°ì„ í•  ìˆ˜
                ìˆì–´ì•¼ í•©ë‹ˆë‹¤."
                <br />
                <a
                  href="https://velog.io/@teo/gradation-thinking#%EA%B7%B8%EB%9D%BC%EB%8D%B0%EC%9D%B4%EC%85%98-%EC%A7%80%EB%8F%84---%EC%BD%94%EB%93%9C%EC%9D%98-%EC%97%AD%ED%95%A0%EA%B3%BC-%EC%B6%94%EC%83%81%ED%99%94-%EC%88%98%EC%A4%80"
                  target="_blank"
                  >- í…Œì˜¤ì˜ ì˜í•˜ëŠ” ê°œë°œìê°€ ë˜ëŠ” ê·¸ë¼ë°ì´ì…˜ ì‚¬ê³ ë²•</a
                >
                ì¤‘
              </p>
            </li>
            <li class="fragment fade-in">
              ë¦¬ì•¡íŠ¸ì˜ í•µì‹¬ ê¸°ìˆ (RSC, Suspense, ë™ì‹œì„±)ì„ ë¹ ë¥´ê³  ì‰½ê²Œ ì´í•´í•˜ê¸°
              ìœ„í•´ì„œ
            </li>
          </ol>
          <ul>
            <li class="fragment fade-in">
              í•˜ì§€ë§Œ ê°œë°œì„ í•˜ëŠ”ë° í•„ìš”í•œ ì§€ì‹ì„ í•™ìŠµí•˜ëŠ” ê²ƒì´ ìš°ì„ 
            </li>
            <li class="fragment fade-in">
              'ë¦¬ì•¡íŠ¸ ë‚´ë¶€ì—ëŠ” ì´ëŸ°ê²Œ ìˆêµ¬ë‚˜', ê·¸ë¦¬ê³ 
              <br />'ë¦¬ì•¡íŠ¸ íŒŒì´ë²„ëŠ” ì´ëŸ° ê°œë…ê³¼ ê´€ë ¨ì´ ìˆêµ¬ë‚˜' ì •ë„ë¡œë§Œ
              ì´í•´ë§Œìœ¼ë¡œ ì¶©ë¶„
            </li>
          </ul>
        </section>

        <section>
          <p class="r-fit-text">ê°ì‚¬í•©ë‹ˆë‹¤ğŸ™‡â€â™‚ï¸</p>
        </section>

        <section>
          <h2>ì°¸ê³ ìë£Œ</h2>
          <ul>
            <li>
              <a
                href="https://github.com/acdlite/react-fiber-architecture"
                target="_blank"
                >React Fiber Architecture</a
              >
            </li>
            <li>
              <a
                href="https://www.youtube.com/watch?v=JadWu4Ygnyc&list=PLpq56DBY9U2B6gAZIbiIami_cLBhpHYCA"
                target="_blank"
                >ê°€ì¥ ì‰¬ìš´ ì›¹ê°œë°œ - React íŒ¨í‚¤ì§€ ê¹Œë³´ê¸°</a
              >
            </li>
            <li>
              <a href="https://goidle.github.io/" target="_blank"
                >Deep Dive Magic Code - React í†ºì•„ë³´ê¸°</a
              >
            </li>
            <li>
              <a
                href="https://github.com/facebook/react/blob/main/packages/react-reconciler/src/ReactFiber.js"
                target="_blank"
                >react/packages/react-reconciler/ReactFiber.js</a
              >
            </li>
            <li>
              <a
                href="https://ko.react.dev/blog/2022/03/29/react-v18"
                target="_blank"
                >React v18.0</a
              >
            </li>
          </ul>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script src="plugin/zoom/zoom.js"></script>
    <script src="plugin/search/search.js"></script>
    <script>
      Reveal.initialize({
        hash: true,
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealNotes,
          RevealZoom,
          RevealSearch,
        ],
        controls: true,
        autoAnimateStyles: [
          "opacity",
          "color",
          "background-color",
          "padding",
          "font-size",
          "line-height",
          "letter-spacing",
          "border-width",
          "border-color",
          "border-radius",
          "outline",
          "outline-offset",
        ],
        margin: 0.2,
      });
    </script>
  </body>
</html>
